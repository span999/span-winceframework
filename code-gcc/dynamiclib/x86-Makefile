#
#
#
#


CC=gcc
AR=ar
CFLAGS=-I.

main: main.o staticlib.a sharedlib.so
	$(CC) -Wall -L/home/span/workshop/build/gcc/dynamiclib -lshared -o myTest main.o staticlib.a

main.o:
	$(CC) -c main.c

sharedlib.o:
	$(CC) -Wall -fPIC -c sharedlib.c

sharedlib.so: sharedlib.o
	$(CC) -shared -Wl,-soname,libshared.so -o libshared.so sharedlib.o

staticlib.o:
	$(CC) -Wall -c staticlib.c

staticlib.a: staticlib.o
	$(AR) -cvq staticlib.a staticlib.o


all: main


clean:
	rm *.o
	rm *.a
	rm *.so
	rm myTest


#
# remember to export lib link path here for executable running
# export LD_LIBRARY_PATH=`pwd`:$LD_LIBRARY_PATH
#


