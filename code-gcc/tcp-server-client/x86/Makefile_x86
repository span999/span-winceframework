

CC = gcc
CCFLAG = -Wall -ansi

AR = ar
ARFLAG = rcs

SERVER = host
CLIENT = client
TCPIPS = tcp-ip 
HELPER = toolhelps 
HELPERBIN = libtoolhelps.a


all: clean HELPER TCPIPS CLIENT SERVER
	@echo ================================================================

SERVER:
	@echo ================================================================
	$(CC) $(CCGLAG) -c ../testrun.c ../main.c
	$(CC) $(CCGLAG) -o $(SERVER) testrun.o tcp-server.o main.o -L. -l$(HELPER)

CLIENT:
	@echo ================================================================
	$(CC) $(CCFLAG) -o $(CLIENT) tcp-client.o -L. -l$(HELPER)

TCPIPS:
	@echo ================================================================
	$(CC) $(CCFLAG) -c ../tcp-server.c
	$(CC) $(CCFLAG) -c ../tcp-client.c

HELPER:
	@echo ================================================================
	$(CC) $(CCFLAG) -c ../toolhelps.c
	$(AR) $(ARFLAG) $(HELPERBIN) toolhelps.o

clean:
	@echo ================================================================
	rm -f test client *.o *.a


